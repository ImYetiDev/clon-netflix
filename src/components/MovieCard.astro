---
export interface Props {
    movie: {
        id: number;
        title: string;
        overview: string;
        poster_path: string;
        backdrop_path: string;
        vote_average: number;
        release_date: string;
    };
    variant?: "hero" | "thumb"; // hero = grande, thumb = pequeña
}
const { movie, variant = "thumb" } = Astro.props;
const img =
    variant === "hero"
        ? `https://image.tmdb.org/t/p/original${movie.backdrop_path}`
        : `https://image.tmdb.org/t/p/w500${movie.poster_path}`;
---

<figure
    class={`relative overflow-hidden select-none group ${
        variant === "hero" ? "h-[60vh] w-full" : "h-44 w-32 sm:h-56 sm:w-40"
    }`}
>
    <img
        src={img}
        alt={movie.title}
        loading="lazy"
        class="h-full w-full object-cover transition duration-300 group-hover:scale-105"
    />

    <!-- Capa de info (solo visible en hover o para la card hero) -->
    <figcaption class="...">
        <h2 class="font-bold leading-tight">
            {movie.title || movie.name || "Sin título"}
        </h2>

        {
            variant === "hero" && (
                <>
                    <p class="mt-1 text-xs opacity-80">
                        {movie.release_date
                            ? movie.release_date.slice(0, 4)
                            : "?"}{" "}
                        • ⭐ {movie.vote_average?.toFixed(1) ?? "?"}
                    </p>
                    <p class="mt-2 line-clamp-2 text-sm opacity-90">
                        {movie.overview || "Sin descripción disponible."}
                    </p>
                </>
            )
        }
    </figcaption>
</figure>
