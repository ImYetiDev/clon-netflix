---
const { title, movies } = Astro.props;
import MovieCard from './MovieCard.astro';
const sliderId = `slider-${title.replace(/\s+/g, '-')}`;
---
<section class="space-y-3 relative group">
  <h2 class="text-xl font-semibold mb-2">{title}</h2>

  <div class="relative">
    <!-- Botón Izquierdo -->
    <button
      class="absolute left-0 top-1/2 -translate-y-1/2 z-10 p-2 bg-black/70 text-white rounded-full opacity-0 group-hover:opacity-100 transition"
      data-scroll-left={sliderId}
    >
      ◀
    </button>

    <!-- Contenedor deslizable -->
    <div
      id={sliderId}
      class="flex overflow-x-auto scroll-smooth gap-4 pb-2 px-6"
    >
      {movies.map((movie) => (
        <div class="min-w-[180px] flex-shrink-0">
          <MovieCard movie={movie} />
        </div>
      ))}
    </div>

    <!-- Botón Derecho -->
    <button
      class="absolute right-0 top-1/2 -translate-y-1/2 z-10 p-2 bg-black/70 text-white rounded-full opacity-0 group-hover:opacity-100 transition"
      data-scroll-right={sliderId}
    >
      ▶
    </button>
  </div>
</section>

<!-- JavaScript para manejar los botones -->
<script client:load>
  document.querySelectorAll('[data-scroll-left]').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.dataset.scrollLeft;
      const el = document.getElementById(id);
      if (el) el.scrollBy({ left: -500, behavior: 'smooth' });
    });
  });

  document.querySelectorAll('[data-scroll-right]').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.dataset.scrollRight;
      const el = document.getElementById(id);
      if (el) el.scrollBy({ left: 500, behavior: 'smooth' });
    });
  });
</script>
